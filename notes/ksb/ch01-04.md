# CH 01-04

## CH 01 함수형 프로그래밍의 정의

### 일반적인 정의

Def. 항상 부수 효과를 피하고 순수 함수만 사용하는 프로그래밍 패러다임

- 부수 효과: 명시적 입력 값과 명시적 출력 값 외에 입력, 출력을 하는 일
- 순수 함수: 부수 효과가 없는 함수

### 실용적인 정의

- 액션: 입력값을 계산해 출력하는 함수 중 호출 시점과 횟수에 따라 결과가 달라지는 함수
- 계산: 액션이 아닌 함수
- 데이터: 이벤트에 대한 사실을 기록한 것

### 함수형 프로그래밍의 장점

분산 시스템에 기반한 동작은 문제가 있다.

- 복잡하다. 메시지가 순서가 섞이거나, 중복되거나, 유실되기 때문이다.
- 이해하기 어렵다. 실행 시점이나 횟수에 의존하기 때문이다.

함수형 프로그래밍은 이런 동작을 최소화한다.

- 이해하기 쉽다. 액션을 데이터와 계산으로 최대한 추출(격리)한다.

### 함수형 프로그래밍에서 가장 중요한 두 가지

#### 액션, 계산, 데이터를 구분해서 생각하는 것

- 핵심 기본기: 구분하기, 리팩토링하기, 액션을 더 쉽게 다루기

#### 일급 추상(first-class abstraction)

- 핵심 기본기: 함수 재사용, Reactive Arcitecture, Onion Arcitecture

## CH 03 액션, 계산, 데이터 구분하기

### 액션, 계산, 데이터의 주요 예시

- 액션: 데이터베이스 읽기/쓰기, 네트워크 전송, 계산 바깥의 공유 변수,
- 계산: 결정, 계획
- 데이터: 요청(이벤트)을 처리한 결과, 어떤 것에 대한 목록, 이름, 식별자, 등급, ...

### 액션을 구분하기

1. 액션에서 계산과 데이터를 빼내야 한다.
2. 액션에 의존하는 함수는 모두 액션이다.
3. 액션을 더 작은 단계로 쪼개면 계산과 데이터를 발견할 수 있다.

## CH 04 액션 최소화하기

### 테스트 용이성을 기준으로 리팩토링하기

계산은 테스트가 용이하다.

- 단순히 입력, 출력 값만 확인하면 된다.

액션은 테스트가 어렵다.

- 계산 외적인 사전 조건, 사후 조건을 마련하고 확인하는 것은 복잡하다.
- (ex) DOM 셋업 및 비교, 전역 변수 셋업 및 비교

### 입,출력의 확장성을 기준으로 리팩토링하기

- 입력, 출력 소스가 고정되어 있으면 다른 용도로 재사용할 수 없다.
- (ex) 입력이 전역 변수이면 전역 변수 외의 입력 방식은 못 쓴다.
- (ex) 출력이 DOM 변경이면 DOM 외의 출력 방식은 못 쓴다.
- 즉, 입력 소스를 명시적으로 입력 받고, 별도의 출력 소스는 없애면 된다.

### 함수 추출하기로 액션에서 계산을 추출하기

1. 액션에서 암묵적 입력을 쓰는 코드를 별도의 함수로 추출한다.
2. 원래 코드가 있던 자리에서 별도의 함수를 호출한다.
3. 호출하면서 파라미터로 암묵적 입력을 넘겨준다.

이 별도의 함수가 계산이 된다.
